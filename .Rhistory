library(tidyverse)
library(gridExtra)
library(grid)
plot_mriqc_metric <- function(mriqc,metric){
return (ggplot(data=mriqc, mapping = aes_string(x="subj", y=metric)) + geom_jitter(width=0.1, aes(colour=site))+theme_classic(base_size=9)+theme(panel.background = element_rect(fill="grey95", colour="grey95"),axis.title.x=element_blank()))
}
grid_arrange_shared_legend <- function(...) {
plots <- list(...)
g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
lheight <- sum(legend$height)
grid.arrange(arrangeGrob(grobs=lapply(plots, function(x)
x + theme(legend.position="none",aspect.ratio=0.6))),
legend,
ncol = 1,
heights = unit.c(unit(1, "npc") - lheight, lheight),
widths = unit(0.5, "npc")
)
}
func<- read.csv('/projects/gherman/SPINS_human_phantoms/group_bold.tsv', sep='\t') %>%
mutate(subj = substr(bids_name,1, 6), year = substr(bids_name, 8, 13), site=substr(bids_name, 14, 16))
tsnr <- plot_mriqc_metric(func,"tsnr")
snr <- plot_mriqc_metric(func, "snr")
fd_mean <- plot_mriqc_metric(func,"fd_mean")
fd_perc <- plot_mriqc_metric(func, "fd_perc")
#gsr <- plot_mriqc_metric("gsr")
efc <- plot_mriqc_metric(func, "efc")
aor <- plot_mriqc_metric(func, "aor")
plt <- grid_arrange_shared_legend(tsnr, snr, fd_mean, fd_perc, efc, aor)
plot_mriqc_metric <- function(mriqc,metric){
return (ggplot(data=mriqc, mapping = aes_string(x="subj", y=metric)) + geom_jitter(width=0.1, aes(colour=site))+theme_classic(base_size=6)+theme(panel.background = element_rect(fill="grey95", colour="grey95"),axis.title.x=element_blank()))
}
grid_arrange_shared_legend <- function(...) {
plots <- list(...)
g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
lheight <- sum(legend$height)
grid.arrange(arrangeGrob(grobs=lapply(plots, function(x)
x + theme(legend.position="none",aspect.ratio=0.6))),
legend,
ncol = 1,
heights = unit.c(unit(1, "npc") - lheight, lheight),
widths = unit(0.5, "npc")
)
}
func<- read.csv('/projects/gherman/SPINS_human_phantoms/group_bold.tsv', sep='\t') %>%
mutate(subj = substr(bids_name,1, 6), year = substr(bids_name, 8, 13), site=substr(bids_name, 14, 16))
tsnr <- plot_mriqc_metric(func,"tsnr")
snr <- plot_mriqc_metric(func, "snr")
fd_mean <- plot_mriqc_metric(func,"fd_mean")
fd_perc <- plot_mriqc_metric(func, "fd_perc")
#gsr <- plot_mriqc_metric("gsr")
efc <- plot_mriqc_metric(func, "efc")
aor <- plot_mriqc_metric(func, "aor")
plt <- grid_arrange_shared_legend(tsnr, snr, fd_mean, fd_perc, efc, aor)
library(gridExtra)
library(tidyverse)
library(gridExtra)
library(grid)
plot_mriqc_metric <- function(mriqc,metric){
return (ggplot(data=mriqc, mapping = aes_string(x="subj", y=metric)) + geom_jitter(width=0.1, aes(colour=site))+theme_classic(base_size=6)+theme(panel.background = element_rect(fill="grey95", colour="grey95"),axis.title.x=element_blank()))
}
grid_arrange_shared_legend <- function(...) {
plots <- list(...)
g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
lheight <- sum(legend$height)
grid.arrange(arrangeGrob(grobs=lapply(plots, function(x)
x + theme(legend.position="none",aspect.ratio=0.6))),
legend,
ncol = 1,
heights = unit.c(unit(1, "npc") - lheight, lheight),
widths = unit(0.5, "npc")
)
}
func<- read.csv('/projects/gherman/SPINS_human_phantoms/group_bold.tsv', sep='\t') %>%
mutate(subj = substr(bids_name,1, 6), year = substr(bids_name, 8, 13), site=substr(bids_name, 14, 16))
tsnr <- plot_mriqc_metric(func,"tsnr")
snr <- plot_mriqc_metric(func, "snr")
fd_mean <- plot_mriqc_metric(func,"fd_mean")
fd_perc <- plot_mriqc_metric(func, "fd_perc")
#gsr <- plot_mriqc_metric("gsr")
efc <- plot_mriqc_metric(func, "efc")
aor <- plot_mriqc_metric(func, "aor")
plt <- grid_arrange_shared_legend(tsnr, snr, fd_mean, fd_perc, efc, aor)
library(tidyverse)
library(gridExtra)
library(grid)
plot_mriqc_metric <- function(mriqc,metric){
return (ggplot(data=mriqc, mapping = aes_string(x="subj", y=metric)) + geom_jitter(width=0.1, aes(colour=site))+theme_classic(base_size=6)+theme(panel.background = element_rect(fill="grey95", colour="grey95"),axis.title.x=element_blank()))
}
grid_arrange_shared_legend <- function(...) {
plots <- list(...)
g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
lheight <- sum(legend$height)
grid.arrange(arrangeGrob(grobs=lapply(plots, function(x)
x + theme(legend.position="none",aspect.ratio=0.6))),
legend,
ncol = 1,
heights = unit.c(unit(1, "npc") - lheight, lheight),
widths = unit(0.5, "npc")
)
}
func<- read.csv('/projects/gherman/SPINS_human_phantoms/group_bold.tsv', sep='\t') %>%
mutate(subj = substr(bids_name,1, 6), year = substr(bids_name, 8, 13), site=substr(bids_name, 14, 16))
tsnr <- plot_mriqc_metric(func,"tsnr")
snr <- plot_mriqc_metric(func, "snr")
fd_mean <- plot_mriqc_metric(func,"fd_mean")
fd_perc <- plot_mriqc_metric(func, "fd_perc")
#gsr <- plot_mriqc_metric("gsr")
efc <- plot_mriqc_metric(func, "efc")
aor <- plot_mriqc_metric(func, "aor")
plt <- grid_arrange_shared_legend(tsnr, snr, fd_mean, fd_perc, efc, aor)
